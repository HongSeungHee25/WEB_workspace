<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>dateFormSample.html</title>
<link rel="shortcut icon" href="../image/favicon.ico">
<!-- ìƒíƒœì½”ë“œ ì°¸ê³  : https://ko.wikipedia.org/wiki/HTTP -->
<style type="text/css">
	body{  margin: 0; height: 100%;  }
	header{ box-sizing: border-box; height: 15%; 
	display: flex; align-items: center; justify-content: center;}
	section{ box-sizing: border-box; min-height: 70%; display: flex;
	align-items: center; justify-content: center;}
	label{ font-size: 2em;}
	select{ width: 100px; height: 40px; font-size: 100%; text-align: center;}
	input{ width: 95px; height: 36px; font-size: 100%; }
	button{ width: 100px; height: 40px; font-size: 70%; margin: 10px;
	background-color: pink; color: white; border: none;}
	
</style>
</head>
<body>
<header>
<h1>ğŸ’’HSH HOTELğŸ’’</h1>
</header>
<section>
<form action=""> <!-- ë™ê¸°ë°©ì‹ì˜ ì„œë²„-í´ë¼ì´ì–¸íŠ¸ ë™ë°•ì—ì„œë§Œ form íƒœê·¸ ì‚¬ìš© -->
	<label for="selectNight">ìˆ™ë°•ì¼ìˆ˜ : </label>
	<select name="days" id="selectNight">
		<option value="0">ì„ íƒ</option>
		<option value="1">1ë°•</option>
		<option value="2">2ë°•</option>
		<option value="3">3ë°•</option>
		<option value="4">4ë°•</option>
	</select><br>
	<!--  4. ì…ì‹¤ë‚ ì§œëŠ” ì˜¤ëŠ˜ ì´ì „ ë‚ ì§œëŠ” ì„ íƒì„ ëª»í•˜ë„ë¡ í•´ì•¼í•©ë‹ˆë‹¤. (input íƒœê·¸ min ì†ì„±)
	 	ì…ì‹¤ë‚ ì§œëŠ” ì˜¤ëŠ˜ ~ 3ë‹¬ ì´í›„ë¡œë§Œ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.(input íƒœê·¸ max ì†ì„±)   -->
	<label for="enterDate">ì…ì‹¤ë‚ ì§œ : </label>
	<input type="date" name="start" id="enterDate"><br>
	<label for="outDate">í‡´ì‹¤ë‚ ì§œ : </label>
	<input type="date" name="end" id="outDate"><br>
	
	<label for="reservBtn">
	<button name="reservation" id="reservBtn">ì˜ˆì•½</button></label>
	<label for="cancellBtn">
	<button name="cancellation" id="cancellBtn">ì·¨ì†Œ</button></label>
	
</form>
</section>
<!-- 1. ì…ì‹¤ë‚ ì§œëŠ” ì˜¤ëŠ˜ ë‚ ì§œë¡œ ì´ˆê¸°í™” í•©ë‹ˆë‹¤.
	 2. í‡´ì‹¤ë‚ ì§œëŠ” ì„ íƒí•œ ìˆ™ë°•ì¼ìˆ˜ + ì…ì‹¤ë‚ ì§œë¡œ í•©ë‹ˆë‹¤. 8/2 ì…ì‹¤ + 3ë°• = 8ì›”5ì¼
	 3. í‡´ì‹¤ë‚ ì§œëŠ” select íƒœê·¸ì—ì„œ ìˆ™ë°•ì¼ìˆ˜ ì„ íƒí•˜ë©´ ê³„ì‚°í•´ì„œ í‘œì‹œí•©ë‹ˆë‹¤.
	 							â”—> click, change ì´ë²¤íŠ¸
	 4. ì…ì‹¤ë‚ ì§œëŠ” ì˜¤ëŠ˜ ì´ì „ ë‚ ì§œëŠ” ì„ íƒì„ ëª»í•˜ë„ë¡ í•´ì•¼í•©ë‹ˆë‹¤. (input íƒœê·¸ min ì†ì„±)
	 	ì…ì‹¤ë‚ ì§œëŠ” ì˜¤ëŠ˜ ~ 3ë‹¬ ì´í›„ë¡œë§Œ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.(input íƒœê·¸ max ì†ì„±)
	 **ì°¸ê³  : input type=date ì¸ ê²½ìš° value ëŠ” ë…„ë„4ìë¦¬-ì›”2ìë¦¬-ì¼2ìë¦¬ ë¡œ ì„¤ì •**
	  -->
<script type="text/javascript">
/* ê°•ì‚¬ë‹˜ ë‹µ */
const start = document.forms[0].start	//ì…ì‹¤ë‚ ì§œ ìš”ì†Œ
const end = document.forms[0].end		//í‡´ì‹¤ë‚ ì§œ ìš”ì†Œ
const days = document.forms[0].days		//ìˆ™ë°•ì¼ìˆ˜ ìš”ì†Œ

document.getElementById('selectNight').addEventListener('click',calculateEnd)
										//ì„ íƒìƒì(ë“œë¡­ë‹¤ìš´, ì½¤ë³´) ì—ì„œëŠ” change ì´ë²¤íŠ¸ë„ ê°€ëŠ¥
document.getElementById('enterDate').addEventListener('chenge',calculateEnd)	//ë°˜ë“œì‹œ 'change'ì´ë²¤íŠ¸

//ì…ì‹¤ ë‚ ì§œ ìš”ì†Œì˜ ì´ˆê¸°í™”
let today = new Date()
start.value = dateFormat(today,'-') 
start.min = dateFormat(today,'-') 			//ì…ì‹¤ë‚ ì§œì˜ ìµœì†Œê°’
today.setMonth(today.getMonth()+3)			//3ê°œì›” í›„ ë‚ ì§œë¡œ today ë¥¼ ë³€ê²½í•˜ê¸°
start.max = dateFormat(today,'-') 			//ì…ì‹¤ë‚ ì§œì˜ ìµœëŒ€ê°’

//ìˆ™ë°•ì¼ìˆ˜ ë˜ëŠ” ì…ì‹¤ë‚ ì§œ ì„ íƒí•  ë•Œì˜ ì´ë²¤íŠ¸ í•¨ìˆ˜
function calculateEnd(){
	console.log(start.value)
	console.log(end.value)
	console.log(days.value)
	
	//í‡´ì‹¤ë‚ ì§œ : start.value ëŠ” ë¬¸ìì—´ì´ë¯€ë¡œ ë‚ ì§œí˜•ì‹ìœ¼ë¡œ ë°”ê¾¸ì–´ì„œ + ìˆ™ë°•ì¼ìˆ˜. => ë¬¸ìì—´ë¡œ ë³€ê²½í•´ì„œ í‡´ì‹¤ë‚ ì§œ ìš”ì†Œ value ë¡œ ì„¤ì •í•˜ê¸°
	let temp = new Date(start.value)
	temp.setDate(temp.getDate()+Number(days.value))		//temp ëŠ” ë‚ ì§œí˜•ì‹. + ì€ ë§ì…ˆê³¼ ë¬¸ìì—´ ì—°ê²°
	console.log("í‡´ì‹¤ë‚ ì§œ : "+temp)
	//temp ë¥¼ 'yyyy-mm-dd' ë¬¸ìì—´ë¡œ ë³€í™˜í•˜ì—¬ í‡´ì‹¤ë‚ ì§œë¡œ í•©ë‹ˆë‹¤.
	end.value = dateFormat(temp,'-')	
} 
	//ì›”,ì¼ì€ 1ìë¦¬ ìˆ«ìê°€ ë‚˜ì˜¬ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ë•Œì—ë„ 2ìë¦¬ë¡œ 07ë¡œ í•˜ê³  ì‹¶ìœ¼ë©´
	function dateFormat(vdate){
	let year = vdate.getFullYear()
	let month = (vdate.getMonth()+1).toString().padStart(2,'0')
	let dates = vdate.getDate().toString().padStart(2,'0')
	let result = [year,month,dates].join('-')
	return result
	}

/* â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” */
	/* 2. í‡´ì‹¤ë‚ ì§œëŠ” ì„ íƒí•œ ìˆ™ë°•ì¼ìˆ˜ + ì…ì‹¤ë‚ ì§œë¡œ í•©ë‹ˆë‹¤. 8/2 ì…ì‹¤ + 3ë°• = 8ì›”5ì¼ */
	/* 'selectNight'ë¼ëŠ” IDë¥¼ ê°€ì§„ "ìˆ™ë°•ì¼ìˆ˜"(ì—¬ê¸°ì„œ <select> ìš”ì†Œ)ë¥¼ ì„ íƒí•˜ì—¬ 
		í•´ë‹¹ ìš”ì†Œì— ëŒ€í•œ ì°¸ì¡°ë¥¼ selectNight ë³€ìˆ˜ì— ì €ì¥ 					  */
	const selectNight = document.getElementById('selectNight');
	/* 'outDate'ë¼ëŠ” IDë¥¼ ê°€ì§„ "í‡´ì‹¤ë‚ ì§œ"(ì—¬ê¸°ì„œ <input type="date"> ìš”ì†Œ)ë¥¼ 
		ì„ íƒí•˜ì—¬ í•´ë‹¹ ìš”ì†Œì— ëŒ€í•œ ì°¸ì¡°ë¥¼ outDateInput ë³€ìˆ˜ì— ì €ì¥ 			  */
    const outDateInput = document.getElementById('outDate');

	/* 3. í‡´ì‹¤ë‚ ì§œëŠ” select íƒœê·¸ì—ì„œ ìˆ™ë°•ì¼ìˆ˜ ì„ íƒí•˜ë©´ ê³„ì‚°í•´ì„œ í‘œì‹œí•©ë‹ˆë‹¤.
									â”—> click, change ì´ë²¤íŠ¸             */
	/* ìˆ™ë°•ì¼ìˆ˜ ì„ íƒì‹œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ										  */
    selectNight.addEventListener('change', function() {
      /* ì„ íƒí•œ ìˆ™ë°•ì¼ìˆ˜ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ë¬¸ìì—´ ê°’ì„ ì •ìˆ˜ë¡œ ë³€í™˜í•˜ì—¬ selectedNights ë³€ìˆ˜ì— ì €ì¥ 
      	 parseInt í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ìˆ«ì ê°’ìœ¼ë¡œ ë³€í™˜í•˜ë©°, ë‘ ë²ˆì§¸ ì¸ìˆ˜ì¸ 10ì€ ê¸°ìˆ˜ë¥¼ ë‚˜íƒ€ëƒ„  */
      const selectedNights = parseInt(selectNight.value, 10);
      /* ì„ íƒí•œ ìˆ™ë°•ì¼ìˆ˜ê°€ ìœ íš¨í•œ ìˆ«ìì´ê³ , 0ë³´ë‹¤ í° ê²½ìš° */
      if (!isNaN(selectedNights) && selectedNights > 0) {
    	/* í˜„ì¬ ë‚ ì§œì™€ ì‹œê°„ìœ¼ë¡œ ìƒˆë¡œìš´ Date ê°ì²´ë¥¼ ìƒì„±í•˜ì—¬ departureDate ë³€ìˆ˜ì— ì €ì¥ */
        const departureDate = new Date();
    	/* 1-1) departureDateì˜ ë‚ ì§œë¥¼ ì„ íƒí•œ ìˆ™ë°•ì¼ìˆ˜ë§Œí¼ ë¯¸ë˜ë¡œ ì„¤ì •
    	   1-2) í˜„ì¬ ë‚ ì§œì— selectedNightsë¥¼ ë”í•˜ì—¬ í‡´ì‹¤ ë‚ ì§œë¥¼ ê³„ì‚°  */
        departureDate.setDate(departureDate.getDate() + selectedNights);
    	/* 1-1) departureDateë¥¼ ISO 8601 í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•œ í›„, ì²˜ìŒ 10ê¸€ì (ë…„-ì›”-ì¼ ë¶€ë¶„)ë§Œ ì¶”ì¶œ 
    	   1-2) formattedDepartureDate ë³€ìˆ˜ì— ì €ì¥ */
        const formattedDepartureDate = departureDate.toISOString().slice(0, 10);
    	/* formattedDepartureDate ê°’ìœ¼ë¡œ ì„¤ì •í•˜ì—¬ 'outDateInput' ìš”ì†Œì— í‘œì‹œ
    	   ì„ íƒí•œ ìˆ™ë°•ì¼ìˆ˜ì— ë”°ë¼ í‡´ì‹¤ ë‚ ì§œê°€ ìë™ìœ¼ë¡œ ë³€ê²½  */
        outDateInput.value = formattedDepartureDate;
      }
    });
    
    
    document.getElementById('reservBtn').addEventListener('click',() => {
    	const enterDateInput = document.getElementById('enterDate') // ì…ì‹¤ ë‚ ì§œ ì…ë ¥ ìš”ì†Œ
    	const outDateInput = document.getElementById('outDate') // í‡´ì‹¤ ë‚ ì§œ ì…ë ¥ ìš”ì†Œ
    	const selectNight = document.getElementById('selectNight').value // ìˆ™ë°•ì¼ìˆ˜ ì„ íƒ ìš”ì†Œì˜ ê°’

    	const enterDate = enterDateInput.value; // ì…ì‹¤ ë‚ ì§œ ê°’
    	const outDate = outDateInput.value; // í‡´ì‹¤ ë‚ ì§œ ê°’
    	
    	alert('ìˆ™ë°•ì˜ˆì•½ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.\nìˆ™ë°• ë‚ ì§œëŠ” '+enterDate+' ë¶€í„° '+outDate+' ê¹Œì§€ ì´ '+selectNight+'ì¼ ì…ë‹ˆë‹¤.\nì¦ê±°ìš´ ì—¬í–‰ë˜ì„¸ìš”.')
    });
    document.getElementById('cancellBtn').addEventListener('click',() => {
    	alert('ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.')
    });
	 	
</script>
</body>
</html>